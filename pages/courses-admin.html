<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mindora â€¢ Courses Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Manrope:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="../assets/css/bootstrap/swiper-bundle.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="../assets/css/style.css?v=1" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/style.css">
  <link href="../assets/css/responsive.css" rel="stylesheet">
  <link href="../assets/css/color.css" rel="stylesheet">
</head>
  <body style="background: url(../assets/img/background/bg2.png); background-size: cover; background-position: center; background-attachment: fixed; ">
    <div class="container my-3">
      <div id="header"></div>

      <section class="border rounded-4 shadow p-4 glass mb-4 page-hero">
        <h1 class="display-6">Manage Courses</h1>
        <p class="text-muted">Create, update, and remove courses. Stored locally for demo purposes.</p>
        <div class="hero-media" data-bg="https://picsum.photos/seed/admin-courses/1200/800"></div>
      </section>

      <section class="mb-5">
        <div class="border rounded-4 shadow p-4 glass">
          <form id="courseForm" class="row g-3">
            <div class="col-md-4"><label class="form-label">ID</label><input id="cId" class="form-control" required></div>
            <div class="col-md-8"><label class="form-label">Title</label><input id="cTitle" class="form-control" required></div>
            <div class="col-md-12"><label class="form-label">Description</label><textarea id="cDesc" class="form-control" rows="2" required></textarea></div>
            <div class="col-md-3"><label class="form-label">Duration</label><input id="cDuration" class="form-control" required></div>
            <div class="col-md-3"><label class="form-label">Level</label><input id="cLevel" class="form-control" required></div>
            <div class="col-md-3"><label class="form-label">Condition</label><input id="cCondition" class="form-control" required></div>
            <div class="col-md-3"><label class="form-label">Image URL</label><input id="cImage" class="form-control"></div>
            <div class="col-md-12"><label class="form-label">Lessons (comma separated)</label><input id="cLessons" class="form-control" placeholder="Warm-up, Intervals, Recovery"></div>
            <div class="col-12 d-flex gap-2">
              <button id="createBtn" class="btn btn-primary rounded-pill" type="submit"><i class="bi bi-plus-lg me-1"></i>Create / Update</button>
              <button id="resetBtn" class="btn btn-outline-secondary rounded-pill" type="button"><i class="bi bi-arrow-counterclockwise me-1"></i>Reset</button>
              <a href="./pages/courses.html" class="btn btn-outline-primary rounded-pill"><i class="bi bi-grid me-1"></i>View Courses</a>
            </div>
          </form>
        </div>
      </section>

      <section>
        <div class="border rounded-4 shadow p-4 glass">
          <h2 class="h5 mb-3">Existing Courses</h2>
          <div id="adminCourses" class="row g-3"></div>
        </div>
      </section>

      <div id="footer"></div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="../assets/js/app.min.js?v=1"></script>
    <script>
      $(function(){
        window.Components.init();
        function toLessons(s){ return (s||'').split(',').map(function(x){ return x.trim(); }).filter(Boolean); }
        function renderAdmin(){ window.CourseStore.list().then(function(list){ var html = list.map(function(c){ return '<div class="col-12 col-md-6 col-lg-4"><div class="card h-100 glass"><img class="card-img-top" src="'+(c.image||'https://picsum.photos/seed/course-'+c.id+'/800/450')+'" alt="'+c.title+'"><div class="card-body"><span class="badge text-bg-primary mb-2">'+c.condition+'</span><h3 class="h6">'+c.title+'</h3><p class="text-muted">'+c.description+'</p><div class="d-flex gap-2"><button class="btn btn-outline-secondary rounded-pill" data-edit="'+c.id+'"><i class="bi bi-pencil"></i></button><button class="btn btn-outline-danger rounded-pill" data-del="'+c.id+'"><i class="bi bi-trash"></i></button></div></div></div></div>'; }).join(''); $('#adminCourses').html(html); }); }
        renderAdmin();
        $('#courseForm').on('submit', function(e){ e.preventDefault(); var course = { id: $('#cId').val().trim(), title: $('#cTitle').val().trim(), description: $('#cDesc').val().trim(), duration: $('#cDuration').val().trim(), level: $('#cLevel').val().trim(), condition: $('#cCondition').val().trim(), image: $('#cImage').val().trim(), lessons: toLessons($('#cLessons').val()) }; window.CourseStore.update(course).then(function(){ renderAdmin(); }); });
        $('#resetBtn').on('click', function(){ $('#courseForm')[0].reset(); });
        $('#adminCourses').on('click', function(e){ var t=e.target.closest('button'); if (!t) return; var id=t.getAttribute('data-edit')||t.getAttribute('data-del'); if (!id) return; if (t.hasAttribute('data-edit')){ window.CourseStore.list().then(function(list){ var c=list.find(function(x){return x.id===id;}); if (!c) return; $('#cId').val(c.id); $('#cTitle').val(c.title); $('#cDesc').val(c.description); $('#cDuration').val(c.duration); $('#cLevel').val(c.level); $('#cCondition').val(c.condition); $('#cImage').val(c.image||''); $('#cLessons').val((c.lessons||[]).join(', ')); window.scrollTo({ top: 0, behavior: 'smooth' }); }); } else { window.CourseStore.remove(id).then(function(){ renderAdmin(); }); } });
      });
    </script>
  </body>
  </html>
